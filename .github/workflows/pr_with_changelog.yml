name: Create PR with Changelog

on:
  push:
      branches:
            - 'automation/*'

            permissions:
              contents: write
                pull-requests: write

                jobs:
                  create-pr-with-changelog:
                      runs-on: ubuntu-latest

                              steps:
                                    - name: Checkout repository
                                            uses: actions/checkout@v4
                                                    with:
                                                              fetch-depth: 0

                                                                    - name: Generate Changelog
                                                                            id: changelog
                                                                                    run: |
                                                                                              cat > CHANGELOG.md << 'EOF'
                                                                                                        # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π / Changelog
                                                                                                        
                                                                                                                  ## [v1.0.0] - $(date +%Y-%m-%d)
                                                                                                                  
                                                                                                                            ### ‚ú® –æ–≤—ã–µ –≤–æ–∑–æ–∂–Ω–æ—Å—Ç–∏
                                                                                                                                      - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è Pull Request
                                                                                                                                                - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CHANGELOG.md –ø—Ä–∏ –æ–æ–æ–æ–≤–ª–µ–Ω–∏—è—Ö
                                                                                                                                                          - GitHub Actions workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                                                                                                                                                                    - –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–µ–ª–∏–∑–æ–≤
                                                                                                                                                                    
                                                                                                                                                                              ###  –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                                                                                                                                                                                        - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
                                                                                                                                                                                                  - –û–±–Ω–æ–≤–ª—ë–Ω README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
                                                                                                                                                                                                  
                                                                                                                                                                                                            ### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
                                                                                                                                                                                                                      - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã GitHub Actions workflows
                                                                                                                                                                                                                                - –î–æ–≤–ª–µ–Ω PowerShell —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
                                                                                                                                                                                                                                          EOF
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                              git config --local user.email "github-actions[bot]@users.noreply.github.com"
                                                                                                                                                                                                                                                                        git config --local user.name "github-actions[bot]"
                                                                                                                                                                                                                                                                                  git add CHANGELOG.md
                                                                                                                                                                                                                                                                                            git diff --cached --name-only > changed_files.txt
                                                                                                                                                                                                                                                                                                      echo "files<<EOF" >> $GITHUB_OUTPUT
                                                                                                                                                                                                                                                                                                                cat changed_files.txt >> $GITHUB_OUTPUT
                                                                                                                                                                                                                                                                                                                          echo "EOF" >> $GITHUB_OUTPUT
                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                - name: Create Pull Request
                                                                                                                                                                                                                                                                                                                                        uses: peter-evans/create-pull-request@v5
                                                                                                                                                                                                                                                                                                                                                with:
                                                                                                                                                                                                                                                                                                                                                          token: ${{ secrets.GITHUB_TOKEN }}
                                                                                                                                                                                                                                                                                                                                                                    commit-message: 'chore: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ CHANGELOG.md'
                                                                                                                                                                                                                                                                                                                                                                              branch: ${{ github.ref_name }}
                                                                                                                                                                                                                                                                                                                                                                                        base: main
                                                                                                                                                                                                                                                                                                                                                                                                  title: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å CHANGELOG'
                                                                                                                                                                                                                                                                                                                                                                                                            body: |
                                                                                                                                                                                                                                                                                                                                                                                                                        ## üìã –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∂—É—Ä–Ω–∞–ª–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                –≠—Ç–æ—Ç PR –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:
                                                                                                                                                                                                                                                                                                                                                                                                                                                            - –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π CHANGELOG.md
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        - –í—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω—è –≤ –ø—Ä–æ–µ–∫—Ç–µ
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ### üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ```
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ${{ steps.changelog.outputs.files }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ```
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ### ‚ÑπÔ∏è –î–µ–π—Å—Ç–≤–∏—è
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏ –≤ CHANGELOG.md
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                3. –£—Ç–µ–¥–∏—Ç–µ –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ PR —Å –æ—Å–Ω–≤–Ω–æ–π –≤–µ—Ç–∫–æ–π
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ü§ñ –≠—Ç–æ—Ç PR —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ GitHub Actions
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              draft: true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        delete-branch: false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  labels: |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              automation
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          changelog
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      release
